var app=angular.module("health-advisor",["ui.router","ngAnimate","ImageCropper","ui.bootstrap","ui.utils","bw.paging","timeRelative","ngStorage","ngSanitize","ngTagsInput","autocomplete"]);app.config(["$stateProvider","$urlRouterProvider","$provide",function(a,b,c){function d(a,b,c,d,e,f){var g=a.defer();b(function(){f.accessToken?g.resolve():(g.resolve(),d.go("login"))},100)}function e(a,b,c,d,e,f){var g=a.defer();b(function(){f.accessToken?(g.resolve(),d.go("home")):g.resolve()},100)}function f(a,b,c,d,e,f){var g=a.defer();b(function(){if(f.accessToken)g.resolve();else{c.isReload=!0,c.reloadState=d.next.name;for(var a in d.toParams)c.reloadState+="/"+d.toParams[a];g.resolve(),d.go("login")}})}e.$inject=["$q","$timeout","$rootScope","$state","$localStorage","HealthAuth"],d.$inject=["$q","$timeout","$rootScope","$state","$localStorage","HealthAuth"],f.$inject=["$q","$timeout","$rootScope","$state","$localStorage","HealthAuth"],b.otherwise("/home"),a.state("home",{templateUrl:"src/views/home/home.html",controller:"HomeController",url:"/home"}).state("login",{templateUrl:"src/views/header/login.html",controller:"AuthenticationController",url:"/login",resolve:{loggedout:e}}).state("forgot-password",{templateUrl:"src/views/header/forgot-password.html",controller:"AuthenticationController",url:"/forgot-password"}).state("change-password",{templateUrl:"src/views/header/resetPassword.html",controller:"AuthenticationController",url:"/change-password"}).state("register",{templateUrl:"src/views/header/register.html",controller:"AuthenticationController",url:"/register",resolve:{loggedout:e}}).state("doctor-verify",{templateUrl:"src/views/doctors/doctor-verified.html",controller:"AuthenticationController",url:"/doctor-verify"}).state("updateDoctorProfile",{templateUrl:"src/views/doctors/doctor-profile.html",controller:"DoctorProfileController",url:"/updateDoctorProfile",resolve:{loggedout:d}}).state("updateUserProfile",{templateUrl:"src/views/customer/update-profile.html",controller:"UserProfileController",url:"/updateUserProfile",resolve:{loggedout:d}}).state("specialization",{templateUrl:"src/views/common/specialization.html",url:"/specialization",controller:"SpecializationController"}).state("specialization-details",{templateUrl:"src/views/common/sepcialization-details.html",url:"/specialization-details",controller:"SpecializationController"}).state("contact-us",{templateUrl:"src/views/common/contact-us.html",url:"/contact-us",controller:"CommonController"}).state("state-directory",{templateUrl:"src/views/directory/state-directory.html",url:"/state-directory",controller:"DirectoryController"}).state("city-directory",{templateUrl:"src/views/directory/city-directory.html",url:"/city-directory/:cityName",controller:"DirectoryController"}).state("doctors-directory",{templateUrl:"src/views/directory/doctors-directory.html",url:"/doctors-directory/:cityName",controller:"DirectoryController"}).state("doctors-list",{templateUrl:"src/views/doctors/doctors-list.html",url:"/doctors-list",controller:"DoctorsController",params:{searchParams:null}}).state("doctor-direction",{templateUrl:"src/views/doctors/doctor-direction.html",url:"/doctor-direction",controller:"DoctorsController"}).state("find-doctors",{templateUrl:"src/views/doctors/find-doctors.html",url:"/find-doctors"}).state("doctor-details",{templateUrl:"src/views/doctors/doctor-details.html",url:"/doctor-details/:profileName",controller:"DoctorDetailsController"}).state("signedDoctor",{templateUrl:"src/views/doctors/doctor-details.html",url:"/signedDoctor",controller:"DoctorDetailsController",resolve:{loggedout:d}}).state("signedUser",{templateUrl:"src/views/customer/customer-profile.html",url:"/signedUser",controller:"UserProfileController"}).state("doctor-compare",{templateUrl:"src/views/doctors/doctor-compare.html",url:"/doctor-compare",controller:"DoctorsController"}).state("review-doctor",{templateUrl:"src/views/doctors/review/review-doctor.html",url:"/review-doctor/:profileName",controller:"ReviewController",resolve:{loggedout:f}}).state("review-preview",{templateUrl:"src/views/doctors/review/review-preview.html",url:"/review-preview/:profileName",controller:"ReviewController",resolve:{loggedout:f}}).state("review-success",{templateUrl:"src/views/doctors/review/review-success.html",url:"/review-success/:profileName",controller:"ReviewController",resolve:{loggedout:f}}),c.decorator("$state",["$delegate","$rootScope",function(a,b){return b.$on("$stateChangeStart",function(b,c,d){a.next=c,a.toParams=d}),a}])}]),app.run(["$http","$rootScope","$timeout","AuthorizeService",function(a,b,c,d){d.checkTokenTime(),b.$on("$stateChangeSuccess",function(a,c,d,e,f){b.stateName=c.name,window.scrollTo(0,0)})}]),app.constant("CONFIG",{API_PATH:"http://healthadvisor.ssmaktak.com/api/",SERVER_PATH:1}),app.factory("Config",["$rootScope",function(a){var b="https://maps.googleapis.com/maps/api/geocode/json?latlng=",c="AIzaSyAXBP60-UkTuNPGRX5N5jtdKZl2YRvXUdA";return{getLocationUrl:function(a){var d=b+a+"&key="+c;return d}}}]),app.constant("HEALTH_ADVISER",function(){}),app.controller("AuthenticationController",["$scope","$rootScope","$timeout","Util","AuthorizeService","$state","DoctorDetailsService","$state","$localStorage","$location",function(a,b,c,d,e,f,g,f,h,i){function j(b){b.geometry&&(a.user.latLng=b.geometry.location.lat()+","+b.geometry.location.lng()),a.user.city=b.name}a.user={},google="undefined"==typeof google?"":google;var k,l={componentRestrictions:{country:"IN"},types:["(cities)"]};a.initRegister=function(){if(""!=google&&google.maps&&google.maps.places){clearTimeout(k);var b=document.getElementById("city"),d=new google.maps.places.Autocomplete(b,l);google.maps.event.addListener(d,"place_changed",function(){j(d.getPlace()),a.$apply()})}else k=c(a.initRegister,3e3)},a.validatePassword=function(){a.user.password!==a.user.c_pass&&(a.showPasswordMisMatch=!0),a.user.password===a.user.c_pass&&(a.showPasswordMisMatch=!1)},a.validateUserInfo=function(b){var c={email:b};e.validateUserName(c).then(function(b){302==b.data.StatusCode?a.isExist=!0:a.isExist=!1},function(a){})},a.register=function(){var c={actType:"I",address:{city:a.user.city,lat:a.user.latLng},phone:a.user.phone,profile:{fName:a.user.first_name,lName:a.user.last_name},email:a.user.email,initial_signup_method:"health adviser",isDoctor:a.user.isDoctor,password:a.user.password,userName:a.user.email,hearAboutUs:a.user.hear_about};b.showPreloader=!0,e.register(c).then(function(c){if(b.showPreloader=!1,200==c.data.StatusCode){var g={userId:a.user.email,password:a.user.password};e.login(g).then(function(c){b.$emit("login-success"),1==a.user.isDoctor?f.go("doctor-verify"):f.go("updateUserProfile")},function(a){b.showPreloader=!1,d.alertMessage("danger","Something went wrong! unable to register")})}else d.alertMessage("danger","Something went wrong! unable to register")},function(a){b.showPreloader=!1,d.alertMessage("danger","Something went wrong! unable to register")})},a.login=function(){var c={userId:a.user.email,password:a.user.password};b.showPreloader=!0,e.login(c).then(function(c){b.showPreloader=!1,b.$emit("login-success"),200==c.data.StatusCode?(a.user.remember&&(h.user={uname:a.user.email,password:a.user.password}),b.isReload?i.path(b.reloadState):f.go("signedDoctor")):d.alertMessage("danger","Something went wrong! unable to login")},function(a){b.showPreloader=!1,d.alertMessage("danger","Authentication faild")})},a.initLogin=function(){a.user={},a.user.email=h.user?h.user.uname:"",a.user.password=h.user?h.user.password:""},a.forgotPassword=function(){b.showPreloader=!0,e.forgotPassword(a.user.email).then(function(a){b.showPreloader=!1,200==a.data.StatusCode?(d.alertMessage("success","Please check your mail we have sent a Password"),f.go("login")):d.alertMessage("danger","Something went wrong!")})},a.changePassword=function(){b.showPreloader=!0,e.changePassword(a.user).then(function(a){b.showPreloader=!1,200==a.data.StatusCode?d.alertMessage("success","Password successfully changed'"):d.alertMessage("danger","Something went wrong!")})}}]),app.controller("CommonController",["$scope","$rootScope","CommonService","Util",function(a,b,c,d){a.contact={},a.sendEnquiry=function(){a.contact.actType="I",b.showPreloader=!0,c.sendEnquiry(a.contact).then(function(a){200==a.data.StatusCode?d.alertMessage("success","Thank you! We appreciate you contacting us. We'll respond to your inquiry as soon as possible. Have a great day!"):d.alertMessage("danger","Something went wrong! unable to send your request"),b.showPreloader=!1})}}]),app.controller("deleteWorkExperienceModalCtrl",["$scope","$uibModalInstance","deleteWorkExperience","workExpId",function(a,b,c,d){a.ok=function(){c(d),b.close()},a.cancel=function(){b.dismiss("cancel")}}]),app.controller("awardDetailsModalCtrl",["$scope","$uibModalInstance","deleteAwardsDetails","awardId",function(a,b,c,d){a.ok=function(){c(d),b.close()},a.cancel=function(){b.dismiss("cancel")}}]),app.controller("educationModalCtrl",["$scope","$uibModalInstance","deleteEducation","eduid",function(a,b,c,d){a.ok=function(){c(d),b.close()},a.cancel=function(){b.dismiss("cancel")}}]),app.controller("LicenseModalCtrl",["$scope","$uibModalInstance","deleteLicense","lid",function(a,b,c,d){a.ok=function(){c(d),b.close()},a.cancel=function(){b.dismiss("cancel")}}]),app.controller("SpecializationController",["$scope","$rootScope","CommonService","$localStorage","$state",function(a,b,c,d,e){a.getSpecializationList=function(){a.specialization=[],b.showPreloader=!0,c.specialization().then(function(c){b.showPreloader=!1,200==c.data.StatusCode&&(a.specializationList=c.data.Data,angular.forEach(a.specializationList,function(b){a.specialization.push(b.name)}))},function(a){b.showPreloader=!1})},a.initSpecialization=function(b){a.home.doctorName=localStorage.getItem("specialization"),a.isSearched=!!b&&b,c.specializationDetails(a.home.doctorName).then(function(b){console.log(b),a.specializationDetails=b.data.Data[0]})},a.gotoSpecializationDetails=function(a){localStorage.setItem("specialization",a),e.go("specialization-details")}}]).controller("DatePickerCtrl",["$scope",function(a){a.today=function(){a.dt=new Date},a.today(),a.clear=function(){a.dt=null},a.toggleMin=function(){a.minDate=null,a.maxDate=new Date,a.dateMin=new Date},a.toggleMin(),a.open1=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.dateOptions={formatYear:"yy",startingDay:1},a.mode="month",a.initDate=new Date,a.formats=["MM-dd-yyyy","dd-MMM-yyyy","dd-MMMM-yyyy","yyyy-MM-dd","dd/MM/yyyy","yyyy-MMM","shortDate"],a.format=a.formats[4],a.format1=a.formats[5]}]),app.controller("UserProfileController",["$scope","$rootScope","$state","CommonService","Util",function(a,b,c,d,e){function f(b){var c=b.address_components;a.profileDetails.address.streetAddress=b.name,a.profileDetails.address.formatted=b.formatted_address,b.geometry&&(a.profileDetails.address.lat=b.geometry.location.lat(),a.profileDetails.address.lng=b.geometry.location.lng());for(var d=0;d<c.length;d++){var e=c[d].types;"postal_code"==e[0]?a.profileDetails.address.postalCode=c[d].long_name:"administrative_area_level_1"==e[0]?a.profileDetails.address.state=c[d].long_name:"locality"==e[0]?a.profileDetails.address.city=c[d].long_name:"country"==e[0]&&(a.profileDetails.address.country=c[d].long_name)}}function g(b){if(b.files&&b.files[0]){var c=new FileReader;c.onload=function(c){a.imageSrc=c.target.result,a.imagename=b.files[0].name,a.is_crop_image=!0,a.$apply()},c.readAsDataURL(b.files[0])}}google="undefined"==typeof google?"":google;var h;a.showtab=function(a){$("div[id^='div_']").each(function(a,b){$(b).removeClass("in active")}),$("div[id=div_"+a+"]").addClass("in active"),$("ul[id='myTabs']").children().each(function(b,c){$(c).removeClass("active"),$("li[id="+c.id+"]").children().each(function(b,d){d.id==a&&$(c).addClass("active")})})},a.profileDetails=function(){b.showPreloader=!0,d.userDetails().then(function(d){b.showPreloader=!1,200==d.data.StatusCode&&(a.profileDetails=d.data.Data.result,a.profileDetails.language=a.profileDetails.profile.language.length>0?a.profileDetails.profile.language[0].language:"",a.initMapLocation(),a.profileDetails.isDoctor&&c.go("home"))})},a.loadLanguagesList=function(){d.languages().then(function(b){200==b.data.StatusCode&&(a.languages=b.data.Data)},function(a){})};var i={componentRestrictions:{country:"IN"}};a.initMapLocation=function(){if(""!=google&&google.maps&&google.maps.places){clearTimeout(h);var b=document.getElementById("street"),c=new google.maps.places.Autocomplete(b,i);google.maps.event.addListener(c,"place_changed",function(){f(c.getPlace()),a.$apply()})}else h=$timeout(a.initMapLocation,3e3)},$("#addImg").change(function(){g(this)}),$("#cropped_img").load(function(){a.is_crop_image=!1,a.profile_image=$("#cropped_img").attr("src"),a.imageCropStep=1,a.$apply()}),a.clearimage=function(){a.profile_image=""},a.addMobile=function(){a.profileDetails.phone.push(a.mobile),a.mobile={}},a.removeMobile=function(b){a.profileDetails.phone.splice(b,1)},a.updatePersonalProfile=function(){b.showPreloader=!0;var c={};c.profile=a.profileDetails.profile,c.address=a.profileDetails.address,c.phone=a.profileDetails.phone;var f={};f.language=a.profileDetails.language,c.profile.language[0]=f,a.profile_image&&(c.fileData={fileName:a.imagename,inputStream:a.profile_image.split(";base64,")[1]}),d.updatePersonalProfile(c).then(function(c){b.showPreloader=!1,200==c.data.StatusCode?(e.alertMessage("success","your information successfully updated. Thank you."),a.$emit("login-success")):e.alertMessage("danger","Somthing went wrong ! unable to update your information.")},function(a){b.showPreloader=!1,e.alertMessage("danger","Somthing went wrong ! unable to update your information.")})},a.getSettings=function(){d.getSettings().then(function(b){200==b.data.StatusCode&&(a.settings=b.data.Data)})},a.updateSettings=function(){b.showPreloader=!0,d.updateSettings(a.settings).then(function(a){b.showPreloader=!1,200==a.data.StatusCode?e.alertMessage("success","your information successfully updated. Thank you."):e.alertMessage("danger","Somthing went wrong ! unable to update your information.")},function(a){b.showPreloader=!1,e.alertMessage("danger","Somthing went wrong ! unable to update your information.")})}}]),app.controller("DirectoryController",["$scope","$rootScope","DoctorService","$stateParams","DoctorModel","$state","$timeout",function(a,b,c,d,e,f,g){a.getStateList=function(){b.showPreloader=!0;var e=d.cityName?d.cityName:"ind";c.countryDetails(e).then(function(c){b.showPreloader=!1,200==c.data.StatusCode&&(a.stateList=c.data.Data)})},google="undefined"==typeof google?"":google;var h;a.startRecord=1,a.doctorsList=function(){if(""!=google&&google.maps&&google.maps.places&&a.latLong){clearTimeout(h),b.showPreloader=!0;var e={geoPoint:a.latLong,filter:{startRecord:a.startRecord},city:d.cityName};c.fetchDoctor(e).then(function(c){b.showPreloader=!1,200==c.data.StatusCode&&(a.doctorList=c.data.Data.result),console.log(a.doctorList),a.resultCount=a.doctorList.length,a.totalPage=c.data.Data.totalResultCount},function(a){b.showPreloader=!1})}else h=g(a.doctorsList,3e3)},a.filterChanged=function(b){a.startRecord=parseInt(b),a.doctorsList()}}]),app.controller("DoctorDetailsController",["$scope","$rootScope","DoctorService","$stateParams","DoctorDetailsService",function(a,b,c,d,e){a.signed_lawyer=d.profileName,a.loadDoctorDetails=function(){b.showPreloader=!0,d.profileName?c.doctorDetails(d.profileName).then(function(c){b.showPreloader=!1,a.doctorDetails=c.data.Data.result,console.log(c.data.Data),a.initMap(a.doctorDetails.address)}):e.doctorDetails().then(function(c){b.showPreloader=!1,a.doctorDetails=c.data.Data.result,console.log(c.data.Data),a.initMap(a.doctorDetails.address)})},a.initMap=function(a){if(document.getElementById("googleMap")&&(""!=a.lat||""!=a.lng)){var b={lat:parseFloat(a.lat),lng:parseFloat(a.lng)};map=new google.maps.Map(document.getElementById("googleMap"),{zoom:15,center:b});new google.maps.Marker({position:b,map:map})}}}]),app.controller("DoctorProfileController",["$scope","$rootScope","CommonService","$timeout","DoctorDetailsService","Util","$filter","$uibModal","$sce",function(a,b,c,d,e,f,g,h,i){function j(b){var c=b.address_components;a.profileDetails.address.streetAddress=b.name,a.profileDetails.address.formatted=b.formatted_address,b.geometry&&(a.profileDetails.address.lat=b.geometry.location.lat(),a.profileDetails.address.lng=b.geometry.location.lng());for(var d=0;d<c.length;d++){var e=c[d].types;"postal_code"==e[0]?a.profileDetails.address.postalCode=c[d].long_name:"administrative_area_level_1"==e[0]?a.profileDetails.address.state=c[d].long_name:"locality"==e[0]?a.profileDetails.address.city=c[d].long_name:"country"==e[0]&&(a.profileDetails.address.country=c[d].long_name)}}function k(b){if(b.files&&b.files[0]){var c=new FileReader;c.onload=function(c){a.imageSrc=c.target.result,a.imagename=b.files[0].name,a.is_crop_image=!0,a.$apply()},c.readAsDataURL(b.files[0])}}google="undefined"==typeof google?"":google;var l;a.signupCollapse={aboutme:!1,workExperiance:!0,education:!0,license:!0,awards:!0,associations:!0,publications:!0,conference:!0},a.specialize={},a.collapseSignUp=function(b){angular.forEach(a.signupCollapse,function(c,d){d==b?a.signupCollapse[d]=!a.signupCollapse[d]:a.signupCollapse[d]=!0})},a.showtab=function(a){$("div[id^='div_']").each(function(a,b){$(b).removeClass("in active")}),$("div[id=div_"+a+"]").addClass("in active"),$("ul[id='myTabs']").children().each(function(b,c){$(c).removeClass("active"),$("li[id="+c.id+"]").children().each(function(b,d){d.id==a&&$(c).addClass("active")})})},a.loadProfileDetails=function(){b.showPreloader=!0,c.userDetails().then(function(d){b.showPreloader=!1,200==d.data.StatusCode&&(a.profileDetails=d.data.Data.result,a.specialize.languageTags=[],angular.forEach(a.profileDetails.profile.language,function(b){a.specialize.languageTags.push(b.language)}),a.profileDetails.socialLink&&null!=a.profileDetails.socialLink.YOUTUBE?(youtube_url=c.converYoutube(a.profileDetails.socialLink.YOUTUBE),a.youtubeURL=i.trustAsResourceUrl(youtube_url)):a.youtubeURL=null,a.initMapLocation())},function(a){b.showPreloader=!1})},a.changeOnPreffered=function(b){angular.forEach(a.profileDetails.phone,function(a,c){c!==b&&(a.isPreffered=!1)})},a.loadSpecialization=function(){c.specialization().then(function(b){200==b.data.StatusCode&&(a.specializationList=[],angular.forEach(b.data.Data,function(b){a.specializationList.push(b.name)}))},function(a){})},a.loadLanguagesList=function(){c.languages().then(function(b){200==b.data.StatusCode&&(a.languages=[],angular.forEach(b.data.Data,function(b){a.languages.push(b.name)}))},function(a){})},a.updateSpecialization=function(){var b={};b.specializationOn=a.doctor.specialization,b.yearsOfExperience=a.doctor.year,a.profileDetails.specialization.push(b),a.doctor={}},a.clearSpecializationOn=function(b){a.profileDetails.specialization.splice(b,1)};var m={componentRestrictions:{country:"IN"}};a.initMapLocation=function(){if(""!=google&&google.maps&&google.maps.places){clearTimeout(l);var b=document.getElementById("street"),c=new google.maps.places.Autocomplete(b,m);google.maps.event.addListener(c,"place_changed",function(){j(c.getPlace()),a.$apply()})}else l=d(a.initMapLocation,3e3)},$("#addImg").change(function(){k(this)}),$("#cropped_img").load(function(){a.is_crop_image=!1,a.profile_image=$("#cropped_img").attr("src"),a.imageCropStep=1,a.$apply()}),a.clearimage=function(){a.profile_image=""},a.addMobile=function(){a.profileDetails.phone.push(a.mobile),a.mobile={}},a.removeMobile=function(b){a.profileDetails.phone.splice(b,1)},a.updatePersonalProfile=function(){b.showPreloader=!0;var c={};c.profile=a.profileDetails.profile,c.address=a.profileDetails.address,c.phone=a.profileDetails.phone,c.consulation=a.profileDetails.consulation,a.profile_image&&(c.fileData={fileName:a.imagename,inputStream:a.profile_image.split(";base64,")[1]}),e.updatePersonalProfile(c).then(function(c){b.showPreloader=!1,200==c.data.StatusCode?(f.alertMessage("success","your information successfully updated. Thank you."),a.$emit("login-success")):f.alertMessage("danger","Somthing went wrong ! unable to update your information.")},function(a){b.showPreloader=!1,f.alertMessage("danger","Somthing went wrong ! unable to update your information.")})},a.updateSpecializationDetails=function(){b.showPreloader=!0;var c={};c.specialization=a.profileDetails.specialization,c.yearsOfExperience=a.profileDetails.yearsOfExperience,c.profile={},c.profile.language=[],angular.forEach(a.specialize.languageTags,function(a){var b={};b.language=a.text,c.profile.language.push(b)}),e.updatePersonalProfile(c).then(function(a){b.showPreloader=!1,200==a.data.StatusCode?f.alertMessage("success","your information successfully updated. Thank you."):f.alertMessage("danger","Somthing went wrong ! unable to update your information.")},function(a){b.showPreloader=!1,f.alertMessage("danger","Somthing went wrong ! unable to update your information.")})},a.loadLanguages=function(b){var c=g("filter")(a.languages,b);return c},a.editWorkExperience=function(b,c){a.tempwork={},a.tempwork.id=c.id,a.tempwork.organizationName=c.organizationName,a.tempwork.description=c.description,a.tempwork.designation=c.designation,a.tempwork.dateTo="2016-12-31T18:30:00.000Z",a.tempwork.dateFrom=c.dateFrom,a.workEdit=b},a.cancelWorkEdit=function(){delete a.workEdit},a.updateWorkExpDoctor=function(c){b.showPreloader=!0,e.updateWorkExperience(a.tempwork).then(function(d){b.showPreloader=!1,200==d.data.StatusCode?(c.organizationName=a.tempwork.organizationName,c.description=a.tempwork.description,c.designation=a.tempwork.designation,c.dateTo=a.tempwork.dateTo,c.dateFrom=a.tempwork.dateFrom,f.alertMessage("success","You have successfully updated your information Thank You.")):f.alertMessage("danger","Error in update !!!")},function(a){b.showPreloader=!1,f.alertMessage("danger","Error in update !!!")})},a.addWorkExpDoctor=function(){b.showPreloader=!0,e.addWorkExperience(a.workexperience).then(function(c){b.showPreloader=!1,200==c.data.StatusCode?(a.profileDetails.experience.push(c.data.Data),f.alertMessage("success","You have successfully added your information Thank You.")):f.alertMessage("danger","Error in update !!!")},function(a){b.showPreloader=!1,f.alertMessage("danger","Error in update !!!")})},a.deleteWorkExperience=function(c){var d={};d.id=c,b.showPreloader=!0,e.deleteWorkExperience(d).then(function(c){b.showPreloader=!1,200==c.data.StatusCode?(a.profileDetails.experience.splice(a.deleteIndex,1),f.alertMessage("success","You have successfully deleted your information Thank You.")):f.alertMessage("danger","Error in Delete !!!")},function(a){b.showPreloader=!1,f.alertMessage("danger","Error in Delete !!!")})},a.deleteWorkExperienceModal=function(b,c,d){a.deleteIndex=d;h.open({animation:!0,templateUrl:"src/views/modals/workExpDeleteModal.html",controller:"deleteWorkExperienceModalCtrl",size:b,resolve:{deleteWorkExperience:function(){return a.deleteWorkExperience},workExpId:function(){return c}}})},a.saveAwards=function(){var c={fileName:a.photo.imageName,inputStream:a.photo.image.split(";base64,")[1]};a.awards.fileData=c,b.showPreloader=!0,e.saveAwards(a.awards).then(function(c){b.showPreloader=!1,200==c.data.StatusCode&&(a.profileDetails.award.push(c.data.Data),f.alertMessage("success","You have successfully added your information Thank You."))},function(a){f.alertMessage("danger","something went wrong! unable to add awards")})},a.deleteAwardsModal=function(b,c,d){a.deleteIndex=d;h.open({animation:!0,templateUrl:"src/views/modals/awardsDetailDeleteModal.html",controller:"awardDetailsModalCtrl",size:b,resolve:{deleteAwardsDetails:function(){return a.deleteAwardsDetails},awardId:function(){return c}}})},a.deleteAwardsDetails=function(c){var d={};d.id=c,b.showPreloader=!0,e.deleteAwards(d).then(function(c){b.showPreloader=!1,200==c.data.StatusCode?(a.profileDetails.award.splice(a.deleteIndex,1),f.alertMessage("success","You have successfully deleted your information Thank You.")):f.alertMessage("danger","Error in Delete !!!")},function(a){b.showPreloader=!1,f.alertMessage("danger","Error in Delete !!!")})},a.editAwards=function(b,c){a.tempaward={},a.tempaward.id=c.id,a.tempaward.organizationName=c.organizationName,a.tempaward.description=c.description,a.tempaward.awardFor=c.awardFor,a.tempaward.awardDate=c.awardDate,a.tempaward.mainimage=c.awardDate.image,a.awardEdit=b},a.cancelAwardEdit=function(){delete a.awardEdit},a.updateAwards=function(c){if(b.showPreloader=!0,a.tempaward.imageName){var d={fileName:a.tempaward.imageName,inputStream:a.tempaward.image.split(";base64,")[1]};a.tempaward.fileData=d}e.updateAwards(a.tempaward).then(function(d){b.showPreloader=!1,200==d.data.StatusCode?(c.organizationName=a.tempaward.organizationName,c.description=a.tempaward.description,c.awardFor=a.tempaward.awardFor,c.awardDate=a.tempaward.awardDate,c.image=d.data.Data.image,f.alertMessage("success","You have successfully updated your information Thank You.")):f.alertMessage("danger","Error in update !!!")},function(a){b.showPreloader=!1,f.alertMessage("danger","Error in update !!!")})},a.saveEducation=function(){b.showPreloader=!0,e.saveEducation(a.education).then(function(c){b.showPreloader=!1,200==c.data.StatusCode?(a.profileDetails.education.push(c.data.Data),f.alertMessage("success","You have successfully added your information Thank You."),a.education={}):f.alertMessage("danger","something went wrong! unable to add Education")},function(a){f.alertMessage("danger","something went wrong! unable to add Education")})},a.deleteEducationModal=function(b,c,d){a.deleteIndex=d;h.open({animation:!0,templateUrl:"src/views/modals/educationDeleteModal.html",controller:"educationModalCtrl",size:b,resolve:{deleteEducation:function(){return a.deleteEducation},eduid:function(){return c}}})},a.deleteEducation=function(c){var d={};d.id=c,b.showPreloader=!0,e.deleteEducation(d).then(function(c){b.showPreloader=!1,200==c.data.StatusCode?(a.profileDetails.education.splice(a.deleteIndex,1),f.alertMessage("success","You have successfully deleted your information Thank You.")):f.alertMessage("danger","Error in Delete !!!")},function(a){b.showPreloader=!1,f.alertMessage("danger","Error in Delete !!!")})},a.editEducationOpen=function(b,c){a.eduEdit=b,a.tempEducation={},a.tempEducation.id=c.id,a.tempEducation.educationType=c.educationType,a.tempEducation.year=c.year,a.tempEducation.university=c.university,a.tempEducation.major=c.major,a.tempEducation.score=c.score,a.tempEducation.description=c.description},a.cancelEduEdit=function(){delete a.eduEdit},a.checkScore=function(b){b>100?a.isScoreError=!0:a.isScoreError=!1},a.updateEducation=function(c){b.showPreloader=!0,e.updateEducation(a.tempEducation).then(function(a){if(b.showPreloader=!1,200==a.data.StatusCode){var d=a.data.Data;c.educationType=d.educationType,c.year=d.year,c.university=d.university,c.major=d.major,c.score=d.score,c.description=d.description,f.alertMessage("success","You have successfully updated your information Thank You.")}else f.alertMessage("danger","Error in update !!!")},function(a){b.showPreloader=!1,f.alertMessage("danger","Error in update !!!")})},a.saveLicense=function(c){b.showPreloader=!0,e.saveLicense(a.license).then(function(c){b.showPreloader=!1,200==c.data.StatusCode?(a.profileDetails.license.push(c.data.Data),f.alertMessage("success","You have successfully added your information Thank You."),a.education={}):f.alertMessage("danger","something went wrong! unable to add Education")},function(a){b.showPreloader=!1,f.alertMessage("danger","something went wrong! unable to add Education")})},a.deleteLicenseModal=function(b,c,d){a.deleteIndex=d;h.open({animation:!0,templateUrl:"src/views/modals/LicenseDetailDeleteModal.html",controller:"LicenseModalCtrl",size:b,resolve:{deleteLicense:function(){return a.deleteLicense},lid:function(){return c}}})},a.deleteLicense=function(c){var d={};d.id=c,b.showPreloader=!0,e.deleteLicense(d).then(function(c){b.showPreloader=!1,200==c.data.StatusCode?(a.profileDetails.license.splice(a.deleteIndex,1),f.alertMessage("success","You have successfully deleted your information Thank You.")):f.alertMessage("danger","Error in Delete !!!")},function(a){b.showPreloader=!1,f.alertMessage("danger","Error in Delete !!!")})},a.editLicenseOpen=function(b,c){a.editLicense=b,a.tempLicense={},a.tempLicense.id=c.id,a.tempLicense.licenseNumber=c.licenseNumber,a.tempLicense.issueDate=c.issueDate,a.tempLicense.expiryDate=c.expiryDate,a.tempLicense.organizationName=c.organizationName,a.tempLicense.description=c.description,console.log(a.tempLicense)},a.cancelLicenseEdit=function(){delete a.editLicense},a.updateLicense=function(c){b.showPreloader=!0,e.updateLicense(a.tempLicense).then(function(a){if(b.showPreloader=!1,200==a.data.StatusCode){var d=a.data.Data;c.licenseNumber=d.licenseNumber,c.issueDate=d.issueDate,c.expiryDate=d.expiryDate,c.organizationName=d.organizationName,c.description=d.description,f.alertMessage("success","You have successfully updated your information Thank You.")}else f.alertMessage("danger","Error in update !!!")},function(a){b.showPreloader=!1,f.alertMessage("danger","Error in update !!!")})},a.updateWebsiteUrl=function(){var c={};if(a.profileDetails.website.match("^http://")||a.profileDetails.website.match("^https://")){var d=a.profileDetails.website.split("://");c.website=d[1]}else c.website=a.profileDetails.website;b.showPreloader=!0,e.updatePersonalProfile(c).then(function(a){b.showPreloader=!1,200==a.data.StatusCode?f.alertMessage("success","your information successfully updated. Thank you."):f.alertMessage("danger","Somthing went wrong ! unable to update your information.")},function(a){b.showPreloader=!1,f.alertMessage("danger","Somthing went wrong ! unable to update your information.")})},a.clearWebsiteUrl=function(){a.profileDetails.website="",a.updateWebsiteUrl()},a.selectSocialMedia=function(b){a.boxShow=!0,a.socialmedia={},a.updateWeblinkURL(b),a.platform=b},a.updateWeblinkURL=function(b){var c;switch(a.socialmedia.webLink="",c=a.profileDetails.socialLink?a.profileDetails.socialLink:a.profileDetails.socialLink={},b){case"fb":a.placeholder="Your facebook link",null!=c.FACEBOOK&&(a.socialmedia.webLink=c.FACEBOOK);break;case"tw":a.placeholder="Your twitter link",null!=c.TWITTER&&(a.socialmedia.webLink=c.TWITTER);break;case"gp":a.placeholder="Your google plus link",null!=c.GPLUS&&(a.socialmedia.webLink=c.GPLUS);break;case"ln":a.placeholder="Your linkedin link",null!=c.LINKEDIN&&(a.socialmedia.webLink=c.LINKEDIN);break;case"yt":a.placeholder="Your youtube link",null!=c.YOUTUBE&&(a.socialmedia.webLink=c.YOUTUBE);break;case"pi":a.placeholder="Your Pinterest link",null!=c.PINTEREST&&(a.socialmedia.webLink=c.PINTEREST)}},a.updateSocialMediaURL=function(){a.profileDetails.socialLink||(a.profileDetails.socialLink={});var d={};switch(a.platform){case"fb":a.profileDetails.socialLink.FACEBOOK=a.socialmedia.webLink;break;case"tw":a.profileDetails.socialLink.TWITTER=a.socialmedia.webLink;break;case"gp":a.profileDetails.socialLink.GPLUS=a.socialmedia.webLink;break;case"ln":a.profileDetails.socialLink.LINKEDIN=a.socialmedia.webLink;break;case"yt":a.profileDetails.socialLink.YOUTUBE=a.socialmedia.webLink;var g=!0;break;case"pi":a.profileDetails.socialLink.PINTEREST=a.socialmedia.webLink}d.socialLink=a.profileDetails.socialLink,b.showPreloader=!0,e.updatePersonalProfile(d).then(function(d){if(b.showPreloader=!1,200==d.data.StatusCode){if(g)if(a.is_remove)a.youtubeURL="";else{var e=c.converYoutube(a.socialmedia.webLink);a.youtubeURL=i.trustAsResourceUrl(e)}a.is_remove=!1,f.alertMessage("success","your information successfully updated. Thank you.")}else f.alertMessage("danger","Somthing went wrong ! unable to update your information.")},function(a){b.showPreloader=!1,f.alertMessage("danger","Somthing went wrong ! unable to update your information.");
})},a.processForm=function(){a.showTheForm=!1},a.processForm1=function(){a.showTheForm1=!1},a.changeSelect=function(b,c,d){c&&d&&(moment(c).isAfter(d)?"start"==b?a.is_startError=!0:"end"==b?a.is_endError=!0:"e_start"==b?a.is_EstartError=!0:"e_end"==b&&(a.is_EendError=!0):(a.is_startError=!1,a.is_EstartError=!1,a.is_endError=!1,a.is_EendError=!1))}}]),app.controller("ReviewController",["$scope","$rootScope","$stateParams","DoctorService","CommonService","$state",function(a,b,c,d,e,f){b.isReload=!1,a.loadCurrentReview=function(){var b=e.getReviewDetails();a.doctorDetails=b.doctorDetails,a.review=b.review,a.doctorDetails||a.getDoctorDetails()},a.getDoctorDetails=function(){a.review={},a.review.isAnonymous=!1,a.review.willRecomended=!1,a.review.hasConsulted=!1,b.showPreloader=!0,c.profileName&&d.doctorDetails(c.profileName).then(function(c){b.showPreloader=!1,a.doctorDetails=c.data.Data.result})},a.gotoPreview=function(){var b={review:a.review,doctorDetails:a.doctorDetails};e.setReviewDetails(b),f.go("review-preview",{profileName:c.profileName})},a.currentRatings=function(b){rating=b.rating.toString().split("."),ratingArr=[],halfStar=!1;for(var c=0;c<5;c++)c<parseInt(rating[0])?ratingArr.push("color-yellow fa fa-star"):parseInt(rating[1])&&!halfStar?(ratingArr.push("color-yellow fa fa-star-half-o"),halfStar=!0):ratingArr.push("color-yellow fa fa-star-o");a.currentRating=ratingArr},a.submitReview=function(){a.review.doctorId=a.doctorDetails.userCode,console.log(a.review),b.showPreloader=!0,e.reviewDoctor(a.review).then(function(a){b.showPreloader=!1,200==a.data.StatusCode&&f.go("review-success",{profileName:c.profileName})})}}]),app.controller("DoctorsController",["$scope","$rootScope","DoctorService","$stateParams","DoctorModel","$state","orderByFilter",function(a,b,c,d,e,f,g){a.compareDoctorArr=[{},{},{},{}];var h,i,j,k,l;a.paging={currentPage:1,totalPage:0,showResult:0},a.filter={},a.filter.sorting="avgRating",a.showCompare=function(b,c){switch(b){case"show":a.showCompareBox=!0;for(var d in a.compareDoctorArr)if(angular.equals(a.compareDoctorArr[d],{})&&a.compareDoctorArr.indexOf(c)===-1){a.compareDoctorArr[d]=c;break}break;case"clear":a.resetCompareDoctor()}},a.initListing=function(){a.filter.sorting="avgRating",a.doctorList=c.getDoctorLisitng(),a.searchData=c.getSearchData(),a.resetCompareDoctor(),a.loadMap(),a.doctorList.result&&(angular.forEach(a.doctorList.result,function(a){a.specializationArray=[],angular.forEach(a.specialization,function(b){a.specializationArray.push(b.specializationOn)}),a.specializationArray=a.specializationArray.toString()}),a.paging.showResult=a.doctorList.result.length,a.paging.totalPage=a.doctorList.totalResultCount)},b.$on("DOCTOR_LIST_FETCHED",function(){a.paging.currentPage=1,a.filter={}}),a.loadMap=function(){a.markers=[],h=new google.maps.Map(document.getElementById("googleMap"),{zoom:7}),a.setMarkers()},a.setMarkers=function(){var b=new google.maps.LatLngBounds;angular.forEach(a.doctorList.result,function(c){var d=new google.maps.LatLng(parseFloat(c.address.lat),parseFloat(c.address.lng)),e=new google.maps.Marker({position:d,map:h,animation:google.maps.Animation.DROP});console.log(e),b.extend(d),a.markers.push(e)}),h.setCenter(b.getCenter())},a.resetCompareDoctor=function(){a.compareDoctor=[{},{},{},{}]},a.closeCompare=function(){a.showCompareBox=!1},a.closeDoctorCompare=function(b){a.compareDoctorArr[b]={},a.compareCloseCount()},a.compareCloseCount=function(){for(var b in a.compareDoctorArr)if(!angular.equals(a.compareDoctorArr[b],{}))return;a.showCompareBox=!1},a.doCompare=function(){e.setCompareArr(a.compareDoctorArr),f.go("doctor-compare")},a.compareInit=function(){a.compareDoctorArr=e.getCompareArr()},a.filterChanged=function(d){b.showPreloader=!0;var e={},g=0;e.startRecord=d?parseInt(d):1,angular.forEach(a.filter,function(b,c){switch(c){case"languages":e.language=[],angular.forEach(a.filter.languages,function(b,c){b&&e.language.push(c),g++,g>=Object.keys(a.filter.languages).length&&e.language.length<=0&&delete e.language});break;case"specialization":e.specialization=[],angular.forEach(a.filter.specialization,function(b,c){b&&e.specialization.push(c),g++,g>=Object.keys(a.filter.specialization).length&&e.specialization.length<=0&&delete e.specialization});break;case"rating":e.rating=[],angular.forEach(a.filter.rating,function(b,c){b&&e.rating.push(c),g++,g>=Object.keys(a.filter.rating).length&&e.rating.length<=0&&delete e.rating});break;case"distance":e.distance=b}});var h={searchText:f.params.searchParams.searchText,geoPoint:f.params.searchParams.latLong,filter:e};c.fetchDoctor(h).then(function(d){b.showPreloader=!1,c.setDoctorLisitng(d.data.Data),a.initListing(),"doctors-list"==f.current.name?f.transitionTo(f.current,{searchParams:{latLong:a.searchData.latLong,searchText:a.searchData.searchText,place:a.searchData.place}}):f.go("doctors-list",{searchParams:{latLong:a.searchData.latLong,searchText:a.searchData.searchText,place:a.searchData.place}})},function(a){})},a.numberToArray=function(a){return new Array(parseInt(a))},a.sortList=function(){var b="profile.name"!=a.filter.sorting&&"distance"!=a.filter.sorting;a.doctorList.result=g(a.doctorList.result,a.filter.sorting,b)},a.downloadVCard=function(a){var b=vCard.create(vCard.Version.TWO);b.add(vCard.Entry.FORMATTEDNAME,a.profile.name),a.phone.length>0&&b.add(vCard.Entry.PHONE,a.phone[0].number),b.add(vCard.Entry.EMAIL,a.emailId),b.add(vCard.Entry.ADDRESS,a.address.formatted),b.add(vCard.Entry.CITY,a.address.city),b.add(vCard.Entry.STATE,a.address.state);vCard["export"](b,a.profile.name,!0)},a.goToDirection=function(a){e.setDoctorProfile(a),f.go("doctor-direction")},a.initDirection=function(){if(a.doctorProfile=e.getDoctorProfile(),a.doctorProfile.address){var b=a.doctorProfile.address,c=new google.maps.LatLng(parseFloat(b.lat),parseFloat(b.lng));navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){var b={lat:a.coords.latitude,lng:a.coords.longitude},d=new google.maps.LatLng(b.lat,b.lng);h=new google.maps.Map(document.getElementById("googleMapdirection"),{center:d,zoom:12});var e={map:h};i=new google.maps.DirectionsService,j=new google.maps.DirectionsRenderer(e);var f=new google.maps.Geocoder;f.geocode({latLng:d},function(a,b){b==google.maps.GeocoderStatus.OK&&(k=a[0].formatted_address,f.geocode({latLng:c},function(a,b){if(b==google.maps.GeocoderStatus.OK){l=a[0].formatted_address;var c={origin:k,destination:l,travelMode:google.maps.TravelMode.DRIVING};i.route(c,function(a,b){if(b==google.maps.DirectionsStatus.OK){j.setDirections(a);var c=new google.maps.DistanceMatrixService;c.getDistanceMatrix({origins:[k],destinations:[l],travelMode:"DRIVING"},function(a,b){})}else window.alert("Directions request failed due to "+b)})}}))})})}else f.go("home")}}]),app.controller("HomeController",["$scope",function(a){a.name="adfasdfa"}]),app.controller("MainController",["$scope","$rootScope","CommonService","Config","$timeout","$state","DoctorService","$timeout","HealthAuth","DoctorDetailsService","AuthorizeService","$uibModal",function(a,b,c,d,e,f,g,e,h,i,j,k){a.$on("$viewContentLoaded",function(a){$(document).trigger("TemplateLoaded")}),b.$on("SESSION_EXPIRED",function(){k.open({animation:!0,templateUrl:"src/views/modals/sessionExpiryModal.html",controller:"modalController",backdrop:"static",keyboard:!1,size:"sm",resolve:{logout:function(){return a.logout}}})}),b.$on("login-success",function(b){a.signedView=!1,a.getUserDetails()}),a.getUserDetails=function(){h.accessToken&&e(function(){a.signedView=!0,i.doctorDetails().then(function(a){b.logedInUser=a.data.Data.result},function(a){})},500)},a.gotoEditProfile=function(){b.logedInUser.isDoctor?f.go("updateDoctorProfile"):f.go("updateUserProfile")},a.showMyProfile=function(){b.logedInUser.isDoctor?f.go("signedDoctor"):f.go("signedUser")},a.logout=function(){j.logout().then(function(c){a.signedView=!1,b.logedInUser={},f.go("login")},function(c){a.signedView=!1,b.logedInUser={},f.go("login")})},google="undefined"==typeof google?"":google;var l;a.home={},a.homeInit=function(b){a.home.location=g.getSearchData()&&g.getSearchData().place?g.getSearchData().place.formatted_address:void 0,!b&&a.home.location||(""!=google&&google.maps&&google.maps.places?(clearTimeout(l),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){var e={lat:b.coords.latitude,lng:b.coords.longitude},f=e.lat+","+e.lng,g=d.getLocationUrl(f);c.fetchLocation(g).then(function(b){a.place=b.data.results[3],a.home.location=a.place.formatted_address,a.latLong=a.place.geometry.location.lat+","+a.place.geometry.location.lng,a.initLocation()},function(a){console.log(a)},{maximumAge:6e4,timeout:5e3,enableHighAccuracy:!0})})):l=e(a.homeInit,3e3))},a.initLocation=function(){var c=document.getElementById("main_loc");autocomplete=new google.maps.places.Autocomplete(c,{types:["geocode"],componentRestrictions:{country:"IN"}}),autocomplete.addListener("place_changed",m),b.isGoogleLoaded=!0,a.$emit("GOOGLE_LOLADED")};var m=function(){var b=a.place=autocomplete.getPlace();b.geometry?a.latLong=b.geometry.location.lat()+","+b.geometry.location.lng():document.getElementById("main_loc").placeholder="Enter a city"};a.clearInputs=function(b){"loc"==b?a.home.location="":"name"==b&&(a.home.doctorName="")},a.getRatings=function(a){if(a.avgRating){rating=a.avgRating.toString().split("."),ratingArr=[],halfStar=!1;for(var b=0;b<5;b++)b<parseInt(rating[0])?ratingArr.push("color-yellow fa fa-star"):parseInt(rating[1])&&!halfStar?(ratingArr.push("color-yellow fa fa-star-half-o"),halfStar=!0):ratingArr.push("color-yellow fa fa-star-o");a.ratingArr=ratingArr}},a.reviewRatings=function(a){if(a&&a.rating>0){rating=a.rating.toString().split("."),ratingArr=[],halfStar=!1;for(var b=0;b<5;b++)b<parseInt(rating[0])?ratingArr.push("fa fa-star"):parseInt(rating[1])&&!halfStar?(ratingArr.push("fa fa-star-half-o"),halfStar=!0):ratingArr.push("fa fa-star-o");a.ratingArr=ratingArr}},a.do_search=function(){b.showPreloader=!0;var c={searchText:a.home.doctorName,geoPoint:a.latLong,filter:{startRecord:1}};g.fetchDoctor(c).then(function(c){switch(b.showPreloader=!1,g.setDoctorLisitng(c.data.Data),g.setSearchData({latLong:a.latLong,searchText:a.home.doctorName,place:a.place}),e(function(){a.$emit("DOCTOR_LIST_FETCHED")},500),f.current.name){case"doctors-list":f.transitionTo(f.current,{searchParams:{latLong:a.latLong,searchText:a.home.doctorName,place:a.place}});break;case"home":f.go("doctors-list",{searchParams:{latLong:a.latLong,searchText:a.home.doctorName,place:a.place}});break;case"find-doctors":f.go("doctors-list",{searchParams:{latLong:a.latLong,searchText:a.home.doctorName,place:a.place}})}},function(a){b.showPreloader=!1})}}]),app.controller("modalController",["$scope","$rootScope","$uibModalInstance","$localStorage","Util","$state","logout",function(a,b,c,d,e,f,g){a.cancel=function(){g(),c.dismiss("cancel")},a.ok=function(){g(),c.dismiss("cancel")}}]),app.directive("phonenumberDirective",["$filter",function(a){function b(b,c,d){b.inputValue=b.phonenumberModel,b.$watch("inputValue",function(c,d){c=String(c);var e=c.replace(/[^0-9]+/g,"");b.phonenumberModel=e,b.inputValue=a("phonenumber")(e)}),b.$watch("phonenumberModel",function(c,d){c=String(c);var e=c.replace(/[^0-9]+/g,"");b.phonenumberModel=e,b.inputValue=a("phonenumber")(e)})}return{link:b,restrict:"E",scope:{phonenumberPlaceholder:"=placeholder",phonenumberModel:"=model","class":"=customclass"},template:'<input ng-model="inputValue" name="phone" type="tel" class="{{class}}" placeholder="{{phonenumberPlaceholder}}" title="Phonenumber (Format: (999) 9999-9999)">'}}]),app.directive("starRating",function(){return{restrict:"EA",template:'<ul class="star-rating" ng-class="{readonly: readonly}">  <li ng-repeat="star in stars" class="star" ng-class="{filled: star.filled}" ng-click="toggle($index)">    <i class="fa fa-star"></i>  </li></ul>',scope:{ratingValue:"=ngModel",max:"=?",onRatingSelect:"&?",readonly:"=?",currentRating:"="},link:function(a,b,c){function d(){a.stars=[];for(var b=0;b<a.max;b++)a.stars.push({filled:b<a.ratingValue})}void 0==a.max&&(a.max=5),a.toggle=function(b){void 0!=a.readonly&&a.readonly!==!1||(a.ratingValue=b+1,a.currentRating=b+1)},a.$watch("currentRating",function(a,b){b&&d()})}}}),app.directive("fileModel",["$parse",function(a){return{restrict:"A",scope:{fileread:"=",filename:"="},link:function(a,b,c){b.bind("change",function(){var c=new FileReader;c.onload=function(c){a.$apply(function(){a.fileread=c.target.result,a.filename=b[0].files[0].name})},c.readAsDataURL(b[0].files[0])})}}}]),app.filter("getShortName",function(){return function(a){if(a){var b=angular.copy(a);return b=b.split(" "),b=b[0].charAt(0)+b[b.length-1].charAt(0),b.toUpperCase()}}}),app.filter("dateformat",function(){return function(a){if(a)return moment(a).format("MM/DD/YYYY")}}),app.filter("yearMonth",function(){return function(a){if(a)return moment(a).format("YYYY MMM")}}),app.filter("dateYear",function(){return function(a){if(a)return moment(a).format("YYYY")}}),app.filter("dateformat1",function(){return function(a){if(a)return moment(a).format("DD-MM-YYYY")}}),app.filter("dateformat2",function(){return function(a){if(a)return moment(a).format("MMM DD, YYYY")}}),app.filter("dateformat3",function(){return function(a){if(a)return moment(a).format("MM-DD-YYYY")}}),app.filter("dateformat4",function(){return function(a){if(a)return moment(a).format("YYYY/MMM")}}),app.filter("phonenumber",function(){return function(a){if(!a)return"";a=String(a);var b=a,c="1"==a[0]?"1 ":"";a="1"==a[0]?a.slice(1):a;var d=a.substring(0,3),e=a.substring(3,6),f=a.substring(6,10);return e&&(b=c+"("+d+") "+e),f&&(b+="-"+f),b}}),app.factory("DoctorModel",function(){var a=[],b={};return{setCompareArr:function(b){a=b},getCompareArr:function(b){return a},setDoctorProfile:function(a){b=a},getDoctorProfile:function(){return b}}}),app.factory("AuthorizeService",["$http","CONFIG","$q","HEALTH_ADVISER","$interval","$timeout","$state","HealthAuth","$rootScope",function(a,b,c,d,e,f,g,h,i){function j(){clearTimeout(k),h.clearUser(),h.clearStorage()}var k,l=function(){if(h.currentUserId){var a=moment(h.expireTime).local().format(),b=moment().local().format();if(moment(a).diff(b)<0)r().then(function(a){i.$emit("login-success"),g.go("login")},function(a){i.$emit("login-success"),g.go("login")});else{var c=moment(a).diff(b);k=f(function(){i.$emit("SESSION_EXPIRED")},c)}}},m=function(c){var d=a({method:"POST",url:b.API_PATH+"_UserSignupCheckEmail",data:c,headers:{"Content-Type":"application/json",Server:b.SERVER_PATH}});return d},n=function(c){var d=a({method:"POST",url:b.API_PATH+"_UserSignup",data:c,headers:{"Content-Type":"application/json",Server:b.SERVER_PATH}});return d},o=function(e){var g=c.defer();return a({method:"POST",url:b.API_PATH+"_Login",data:e,headers:{"Content-Type":"application/json",Server:b.SERVER_PATH}}).then(function(a){var b=moment(a.data.Data.expiryDate).diff(a.data.Data.generateDate)-12e4;d.ACCESS_TOKEN_EXPIRES_IN=b,a.data.Data.expires_in=b,h.setUser(a,e),h.save(),k=f(function(){i.$emit("SESSION_EXPIRED")},b),g.resolve(a)},function(a){g.reject(a)}),g.promise},p=function(c){var d={email:c},e=a({method:"POST",url:b.API_PATH+"_ForgotPassword",data:d,headers:{"Content-Type":"application/json",Server:b.SERVER_PATH}});return e},q=function(c){var d={newPwd:c.password,oldPwd:c.oldPwd},e=a({method:"POST",url:b.API_PATH+"_ChangePassword",data:d,headers:{Server:b.SERVER_PATH,tokenId:h.accessToken}});return e},r=function(){var d=c.defer();return a({method:"POST",url:b.API_PATH+"_Logout",headers:{"Content-Type":"application/json",Server:b.SERVER_PATH,tokenId:h.accessToken}}).then(function(a){j(),d.resolve(a)},function(a){j(),d.reject(a)}),d.promise};return{checkTokenTime:l,validateUserName:m,register:n,login:o,logout:r,forgotPassword:p,changePassword:q}}]),app.factory("HealthAuth",["HEALTH_ADVISER",function(a){function b(){var b=this;e.forEach(function(a){b[a]=c(a)}),a.ACCESS_TOKEN_EXPIRES_IN=this.expiresIn,this.currentUserData=this.currentUserData||null}function c(a){var b=f+a;return localStorage[b]||sessionStorage[b]||null}function d(a,b,c){var d=f+b;null==c&&(c=""),a[d]=c}var e=["accessToken","currentUserData","expireTime","expiresIn","currentUserId"],f="$HealthAdviser$";return b.prototype.save=function(){var a=this,b=localStorage;e.forEach(function(c){d(b,c,a[c])})},b.prototype.setUser=function(b,c){var d=b.data.Data;this.accessToken=d.tokenUId,this.expiresIn=d.expires_in,this.currentUserId=c.userId,this.currentUserData=d,this.expireTime=moment().add(a.ACCESS_TOKEN_EXPIRES_IN,"ms")},b.prototype.clearUser=function(){this.accessToken=null,this.expiresIn=null,this.currentUserId=null,this.currentUserData=null,this.expireTime=null},b.prototype.clearStorage=function(){e.forEach(function(a){d(sessionStorage,a,null),d(localStorage,a,null)})},new b}]),app.factory("CommonService",["$http","$q","CONFIG","HealthAuth",function(a,b,c,d){var e={};return{fetchLocation:function(b){var c=a.get(b);return c},converYoutube:function(a){var b=a.split("=",2);if(null==b)return a;var c=b[1];return return_url="https://www.youtube.com/embed/"+c,return_url},sendEnquiry:function(b){var d=a({method:"POST",url:c.API_PATH+"_ContactUs",data:b,headers:{"Content-Type":"application/json",Server:c.SERVER_PATH}});return d},specialization:function(){var b=a({method:"GET",url:c.API_PATH+"_ENUM_Specialization",headers:{Server:c.SERVER_PATH}});return b},specializationDetails:function(b){var d=a({method:"GET",url:c.API_PATH+"_ENUM_Specialization?descRequired=true&specializationName="+b,headers:{Server:c.SERVER_PATH}});return d},languages:function(){var b=a({method:"GET",url:c.API_PATH+"_ENUM_Language",headers:{Server:c.SERVER_PATH}});return b},userDetails:function(){var b=a({method:"GET",url:c.API_PATH+"_UserData",headers:{Server:c.SERVER_PATH,tokenId:d.accessToken}});return b},updatePersonalProfile:function(b){var e=a({method:"PUT",url:c.API_PATH+"_User",data:b,headers:{Server:c.SERVER_PATH,tokenId:d.accessToken,"content-type":"application/json"}});return e},setReviewDetails:function(a){e=a},getReviewDetails:function(){return e},getSettings:function(){var b=a({method:"GET",url:c.API_PATH+"_Profile_Notification",headers:{Server:c.SERVER_PATH,tokenId:d.accessToken}});return b},updateSettings:function(b){var e=a({method:"PUT",url:c.API_PATH+"_Profile_Notification",data:b,headers:{Server:c.SERVER_PATH,tokenId:d.accessToken,"content-type":"application/json"}});return e},reviewDoctor:function(b){var e=a({method:"POST",url:c.API_PATH+"_Profile_Review",data:b,headers:{Server:c.SERVER_PATH,tokenId:d.accessToken,"content-type":"application/json"}});return e}}}]),app.factory("Util",["$rootScope","$timeout",function(a,b){var c={};return a.alerts=[],c.alertMessage=function(c,d){var e={type:c,msg:d};a.alerts.push(e),b(function(){a.alerts.splice(a.alerts.indexOf(e),1)},5e3)},c}]),app.factory("DoctorDetailsService",["$http","HealthAuth","CONFIG",function(a,b,c){return{doctorDetails:function(){var d=a({method:"GET",url:c.API_PATH+"_UserData",headers:{Server:c.SERVER_PATH,tokenId:b.accessToken}});return d},doctorEducation:function(){var d=a({method:"GET",url:c.API_PATH+"_Profile_Education?type=GET_EDUCATION",headers:{Server:c.SERVER_PATH,tokenId:b.accessToken}});return d},updatePersonalProfile:function(d){var e=a({method:"PUT",url:c.API_PATH+"_User",data:d,headers:{Server:c.SERVER_PATH,tokenId:b.accessToken,"content-type":"application/json"}});return e},updateWorkExperience:function(d){var e=a({method:"PUT",url:c.API_PATH+"_Profile_Experience",data:d,headers:{Server:c.SERVER_PATH,tokenId:b.accessToken,"content-type":"application/json"}});return e},addWorkExperience:function(d){var e=a({method:"POST",url:c.API_PATH+"_Profile_Experience",data:d,headers:{Server:c.SERVER_PATH,tokenId:b.accessToken,"content-type":"application/json"}});return e},deleteWorkExperience:function(d){var e=a({method:"DELETE",url:c.API_PATH+"_Profile_Experience",data:d,headers:{Server:c.SERVER_PATH,tokenId:b.accessToken,"content-type":"application/json"}});return e},saveAwards:function(d){var e=a({method:"POST",url:c.API_PATH+"_Profile_Awards",data:d,headers:{Server:c.SERVER_PATH,tokenId:b.accessToken,"content-type":"application/json"}});return e},deleteAwards:function(d){var e=a({method:"DELETE",url:c.API_PATH+"_Profile_Awards",data:d,headers:{Server:c.SERVER_PATH,tokenId:b.accessToken,"content-type":"application/json"}});return e},updateAwards:function(d){var e=a({method:"PUT",url:c.API_PATH+"_Profile_Awards",data:d,headers:{Server:c.SERVER_PATH,tokenId:b.accessToken,"content-type":"application/json"}});return e},saveEducation:function(d){var e=a({method:"POST",url:c.API_PATH+"_Profile_Education",data:d,headers:{Server:c.SERVER_PATH,tokenId:b.accessToken,"content-type":"application/json"}});return e},deleteEducation:function(d){var e=a({method:"DELETE",url:c.API_PATH+"_Profile_Education",data:d,headers:{Server:c.SERVER_PATH,tokenId:b.accessToken,"content-type":"application/json"}});return e},updateEducation:function(d){var e=a({method:"PUT",url:c.API_PATH+"_Profile_Education",data:d,headers:{Server:c.SERVER_PATH,tokenId:b.accessToken,"content-type":"application/json"}});return e},saveLicense:function(d){var e=a({method:"POST",url:c.API_PATH+"_Profile_License",data:d,headers:{Server:c.SERVER_PATH,tokenId:b.accessToken,"content-type":"application/json"}});return e},deleteLicense:function(d){var e=a({method:"DELETE",url:c.API_PATH+"_Profile_License",data:d,headers:{Server:c.SERVER_PATH,tokenId:b.accessToken,"content-type":"application/json"}});return e},updateLicense:function(d){var e=a({method:"PUT",url:c.API_PATH+"_Profile_License",data:d,headers:{Server:c.SERVER_PATH,tokenId:b.accessToken,"content-type":"application/json"}});return e}}}]),app.factory("DoctorService",["$http","CONFIG",function(a,b){var c={},d={totalRecords:0};return{setDoctorLisitng:function(a){d=a},getDoctorLisitng:function(){return d},setSearchData:function(a){c=a},getSearchData:function(){return c},fetchDoctor:function(c){var d=a({method:"POST",url:b.API_PATH+"_PublicDoctorSearch",data:c,headers:{"Content-Type":"application/json",Server:b.SERVER_PATH}});return d},countryDetails:function(c){var d=a({method:"GET",url:b.API_PATH+"/_CountryCityState/"+c,headers:{"Content-Type":"application/json",Server:b.SERVER_PATH}});return d},doctorDetails:function(c){var d=a({method:"GET",url:b.API_PATH+"_User/"+c,headers:{Server:b.SERVER_PATH}});return d}}}]);